{% extends "base.html" %} 

{% block contents %}
<div class="row">
  {% block category_nav %}
    <div class="col-md-4">
      <ul class="nav hidden-sm hidden-xs affix nav-cat">
        <lh><h4>Browse by Category</h4></lh>
        {% for category in catalog|sortBy('category')|groupBy('category') %}
          <li>
            <a href="#{{category|first['urlized-category']}}">{{loop.key}} ({{Object.keys(category).length}})</a>
          </li>
        {% endfor %}
      </ul>
    </div>
  {% endblock category_nav %}
  <div id="dataPageContent" class="col-md-8">
    {% block catalog_content %}
      <h1>{{ title }}</h1>
      <div class="lead">{{ contents|safe }}</div>
        {% for category in catalog|sortBy(['category', 'name'])|groupBy('category') %}
          <div class="section">
            <h2 id="{{category|first['urlized-category']}}">{{loop.key}}</h2>
            <ul class="media-list list-group">
              {% for item in category %}
                <li class="media list-group-item">
                 {% if item.thumb %}
                    <a class="pull-left" href="{{ item.path }}">
                      <img class="media-object data-thumb" src="{{ item.thumb }}" alt="thumbnail of {{ item.name }} data set">
                    </a>
                   {% else %}
                    <a class="pull-left" href="{{ item.path }}">
                      <img class="media-object" src="holder.js/100x100" alt="...">
                    </a>
                  {% endif %}
                  <div class="media-body">
                    <h4 class="media-heading">
                      <a href="{{ item.path }}">{{ item.name }}</a>
                    </h4>
                    <p>
                      {{ item.short_description }}
                    </p>
                  </div>
                </li>
              {% endfor %}
            </ul>
          </div>
        {% endfor %}
      </div>
    {% endblock catalog_content %}
  </div>

{% endblock contents %}
